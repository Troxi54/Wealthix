!function(){const e={update(e,t){e.innerHTML!==t&&(e.innerHTML=t)},updateAll(){for(const t in e)if(!["update, updateAll"].includes(t)){const n=document.querySelector(("#"+t).replace(/[_]/g,"-"));n&&e.update(n,e[t]())}},cash_amount:()=>`${f.format(h.cash)}$`,main_frame_header:()=>r[o],selling:()=>a?f.format(h.generatorsInInventory[l].sellCost,2)+"$":"Sell",selling_2:()=>c?f.format(h.generatorsInInventory[u].sellCost,2)+"$":"Sell",placing_generator_info:()=>d?"Unequipping a generator":"Placing the generator",upgrading:()=>m?`${f.format(h.generatorsInInventory[l].getLevelCost())}$`:"Upgrade",close_main_frame_text:()=>y?"<":">",is_inventory_empty:()=>0===h.generatorsInInventory.length?"Your inventory is empty":""},t="Gesh";let n=Date.now(),o=0;const r=["Shop","Inventory"];let l=null,s=!1,a=!1,c=!1,i="",d=!1,u=null,m=!1,y=!1,p=Date.now();const v={addEvent(e,t){e.addEventListener("click",t)},addAllEvents(){for(const e in v)if(!["addEvent"].includes(e)){const t=document.querySelector(("#"+e).replace(/[_]/g,"-"));t&&v.addEvent(t,v[e])}},inventory_tools_close:()=>{f.closeInventoryTools(),l=null},equip_generator:()=>{f.closeInventoryTools(),document.querySelector("#placing-generator").show(),s=!0,document.body.classList.add("placingGenerator")},cancel_placing_generator:()=>{d?f.cancelUnequippingGenerator():f.cancelPlacingGenerator()},sell_generator:()=>{a?(h.cash+=h.generatorsInInventory[l].sellCost,h.generatorsInInventory.splice(l,1),f.updateInventoryHTML(),f.closeInventoryTools()):a=!0},generator_got_sell:()=>{c?(h.cash+=h.generatorsInInventory[u].sellCost,h.generatorsInInventory.splice(u,1),f.updateInventoryHTML(),f.closeGeneratorGotMenu()):c=!0},constructor_opened_close:()=>{f.closeConstructor()},constructor_opened_buy:()=>{f.buyConstructor(i)},generator_got_ok:()=>{f.closeGeneratorGotMenu(),f.updateInventoryHTML()},unequip_generator:()=>{document.querySelector("#unequip-generator").hide(),document.querySelector("#placing-generator").show(),d=!0,document.body.classList.add("unequippingGenerator")},upgrade_generator:()=>{if(m){const e=h.generatorsInInventory[l].getLevelCost();h.cash>=e&&(h.generatorsInInventory[l].level+=1,h.cash-=e,h.generatorsInInventory[l].updateEverything(),f.updateInventoryHTML(),f.updateHTMLInInventoryTools())}m=!0},close_main_frame:()=>{const e=document.querySelector("#main-frame"),t=document.querySelector("#main-frame-container");y?(t.className="",e.show()):(t.className="hidden",e.hide()),y=!y}};Element.prototype.hide=function(){this.style.display="none"},Element.prototype.show=function(){this.style.display=""},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};let h={cash:10,slots:9,generatorsOnField:[],generatorsInInventory:[],incomeRate:1,discoveredGenerators:{}};const f={format(e,t=0){const n=["","K","M","B","T","Qd","Qn","Sx","Sp"],o=function(e,t){return Math.floor(e*10**t)/10**t};if(0===e)return"0";if(e<1e3)return o(e,t)+"";if(e<1e9)return(o(e,0)+"").replace(/\B(?=(\d{3})+(?!\d))/g,",");if(e<1e3**n.length){const t=function(e,t){const o=Math.floor(Math.log10(e)/3);return Math.floor(e/1e3**o*10**t)/10**t+n[o]},o=Math.floor(Math.log10(e)/3),r=3,l=e-Math.floor(e/1e3**o*10**r)/10**r*1e3**o;return l?t(e,r)+" + "+t(l,0):t(e,r)}return e.toExponential(4).replace(/[+]/g,"")},updateInventoryHTML(){document.querySelectorAll("#inventory-content > button").forEach((e=>{e.remove()})),h.generatorsInInventory.forEach(((e,t)=>{e.index=t,document.querySelector("#inventory-content").append(e.inventoryHTML)}))},getUndefinedGenerator(e){let t=document.createElement("div");return t.classList.add("generator"),t.classList.add("undefined"),t.innerHTML="<p>+</p>",t.addEventListener("click",(()=>{s&&(h.generatorsInInventory[l].addToField(e),f.cancelPlacingGenerator(),f.updateInventoryHTML())})),t},appendUndefinedGenerator(e,t){const n=document.querySelector("#field");t<document.querySelectorAll("#field > .generator").length?n.insertBefore(e,n.children[t]):n.append(e)},fillGeneratorArray(){const e=document.querySelector("#field");h.generatorsOnField.forEach(((t,n)=>{if(t instanceof g)e.append(t.fieldHTML);else{const t=this.getUndefinedGenerator(n);e.append(t)}}))},switchMainTab(e){document.querySelectorAll("#main-frame-content > div").forEach(((t,n)=>{e!==n&&t.hide()})),document.querySelectorAll("#main-frame-content > div")[e].show(),o=e},updateHTMLInInventoryTools(){const e=document.querySelector("#inventory-tools");e.querySelectorAll(".inventory-generator").forEach((e=>{e.remove()})),h.generatorsInInventory[l].updateEverything();const t=h.generatorsInInventory[l];e.append(t.inventoryHTML),document.querySelector("#inventory-tools-info").innerHTML=`<span class="rarity">Rarity:</span> ${t.type.capitalize()}<br><span class="cash">Income:</span> +${f.format(t.income,2)}$<br><span class="level">Level:</span> ${t.level}`},closeInventoryTools(){document.querySelector("#frame").hide(),document.querySelector("#inventory-tools").hide(),a=!1,m=!1},cancelPlacingGenerator(){s&&(s=!1,document.body.classList.remove("placingGenerator"),document.querySelector("#placing-generator").hide())},updateConstructorGenerators(){const e=document.querySelector("#constructor-opened-generators");e.innerHTML="",L[i].chances.forEach((t=>{const n=new g(t[0]).inventoryHTML;h.discoveredGenerators[t[0]]||(n.className="inventory-generator",t[1]>1?n.classList.add("undiscovered"):t[1]>.01?n.classList.add("super-undiscovered"):n.classList.add("mega-undiscovered"),n.children[0].innerHTML="",n.children[1].innerHTML="?"),n.children[2].innerHTML=t[1]+"%",e.append(n)}))},openConstructor(e){if(e){document.querySelector("#constructor-opened").show(),document.querySelector("#frame").show();const t=document.querySelector("#constructor-opened-div");t.className="div",t.classList.add(e),document.querySelector("#constructor-opened-info").innerHTML=`${e.capitalize()} constructor<br><span class="cash">${this.format(L[e].cost)}$</span>`,i=e,this.updateConstructorGenerators()}},closeConstructor(){document.querySelector("#frame").hide(),document.querySelector("#constructor-opened").hide()},buyConstructor(e){if(h.cash>=L[e].cost){let t=0;const n=100*Math.random();L[e].chances.every((o=>{if(t+=o[1],n<t){const t=new g(o[0]);return t.addToInventory(),t.openGeneratorGotMenu(),h.discoveredGenerators[o[0]]||(h.discoveredGenerators[o[0]]={gottenTimes:0,firstReceiptDate:Date.now()},this.updateConstructorGenerators()),h.cash-=L[e].cost,!1}return!0}))}},closeGeneratorGotMenu(){document.querySelector("#frame-2").hide(),document.querySelector("#generator-got").hide(),c=!1},cancelUnequippingGenerator(){d&&(d=!1,document.body.classList.remove("unequippingGenerator"),document.querySelector("#placing-generator").hide(),f.isFieldEmpty()&&document.querySelector("#unequip-generator").show())},isFieldEmpty:()=>(is=!1,h.generatorsOnField.every((e=>!(e instanceof g)||(is=!0,!1))),is)};window.onload=()=>{h.generatorsOnField=[...Array(h.slots)],document.querySelectorAll("#main-frame-tabs > button").forEach(((e,t)=>{e.addEventListener("click",(()=>{f.switchMainTab(t)}))})),document.querySelectorAll("#shop-content > div > div > button").forEach(((e,t)=>{e.addEventListener("click",(()=>{f.openConstructor(e.id)}))})),v.addAllEvents(),f.switchMainTab(0),function(){const e=localStorage.getItem(t);if(e){const t=JSON.parse(window.atob(e));if(t){for(const e in t)["generatorsOnField","generatorsInInventory"].includes(e)&&t[e].forEach(((n,o)=>{n&&"object"==typeof n&&n.level&&n.type&&(t[e][o]=new g(n.type,{level:n.level}))}));h=t}}}(),f.fillGeneratorArray(),f.updateInventoryHTML(),setInterval((()=>{if(!document.hidden){const t=document.querySelector("#field"),n=100/Math.ceil(h.slots**.5);document.documentElement.style.setProperty("--generator-size",n+"%"),document.documentElement.style.setProperty("--generator-size-px",t.clientWidth*n/100+"px"),document.documentElement.style.setProperty("--generator-dimension",Math.ceil(h.slots**.5)),t.querySelectorAll("div").forEach((e=>{const t=e.querySelector("p"),n=t.style.getPropertyValue("--decreasedSize");if(t.clientWidth>e.clientWidth){const n=t.clientWidth/e.clientWidth*1.05;t.style.fontSize=getComputedStyle(t).fontSize.slice(0,-2)/n+"px",t.style.setProperty("--decreasedSize",n)}else n&&t.clientWidth*n<=e.clientWidth&&(t.style="")}));const o=document.querySelector("#unequip-generator");f.isFieldEmpty()?d||o.show():(o.hide(),d&&f.cancelUnequippingGenerator());const r=e=>{e instanceof g&&e.updateEverything()};if(h.generatorsOnField.forEach(r),h.generatorsInInventory.forEach(r),document.documentElement.style.setProperty("--generator-speed-work",1/h.incomeRate+"s"),Date.now()>=p+1/h.incomeRate*1e3){document.querySelectorAll(".generator p").forEach((e=>{e.classList.add("no-transition"),e.style.top="50%",e.style.opacity="1",setTimeout((()=>{e.classList.remove("no-transition"),e.style.top="25%",e.style.opacity="0"}),1e3/60)}));let e=0;h.generatorsOnField.forEach((t=>{let n=Math.floor((Date.now()-p)/(1e3*h.incomeRate));t instanceof g&&(e+=t.income*n)})),h.cash+=e,p=Date.now()}e.updateAll()}Date.now()>=n+1e4&&(!function(){const e=window.btoa(JSON.stringify(h));localStorage.setItem(t,e),console.log("Game saved!")}(),n=Date.now())}),1e3/60)};class g{constructor(e,t){this.type=e,this.level=1,t&&"object"==typeof t&&"number"==typeof t?.level&&(this.level=t.level),this.updateEverything()}getIncome(){return I[this.type].income*this.getLevelEffect()}getSellCost(){return I[this.type].sell*(this.getLevelCost()/this.getLevelCost(0))}addToField(e){if(e<h.generatorsOnField.length){const t=document.querySelectorAll("#field > .generator");h.generatorsInInventory.splice(l,1),t[e]&&h.generatorsOnField[e]instanceof g&&h.generatorsOnField[e].addToInventory(),t?.[e]?.remove(),h.generatorsOnField[e]=this;const n=document.querySelector("#field");e<t.length-1?n.insertBefore(this.fieldHTML,n.children[e]):e===t.length-1&&n.append(this.fieldHTML),this.index=e}}addToInventory(){h.generatorsInInventory.push(this),h.generatorsInInventory.sort(((e,t)=>t.income-e.income)),f.updateInventoryHTML()}getFieldHTML(){let e=document.createElement("div");return e.classList.add("generator"),e.classList.add(this.type),e.innerHTML=`<p>+${f.format(this.income,2)}$</p>`,e.addEventListener("click",(()=>{if(s)h.generatorsInInventory[l].addToField(this.index),f.cancelPlacingGenerator(),f.updateInventoryHTML();else if(d){const e=h.generatorsOnField.indexOf(this);h.generatorsOnField[e].addToInventory(),h.generatorsOnField[e]=void 0,document.querySelector("#field").children[e].remove(),f.appendUndefinedGenerator(f.getUndefinedGenerator(e),e)}})),e}getInventoryHTML(){let e=document.createElement("button");return e.classList.add("inventory-generator"),e.classList.add(this.type),e.innerHTML=`<p>${this.type.capitalize()}</p><p>+${f.format(this.income,2)}$</p><p>${this.level}</p>`,e.addEventListener("click",(()=>{this.openInInventoryTools(this.index)})),e}updateEverything(){this.income=this.getIncome(),this.sellCost=this.getSellCost(),this.fieldHTML=this.getFieldHTML(),this.inventoryHTML=this.getInventoryHTML()}openInInventoryTools(e){l=e,f.cancelPlacingGenerator();const t=document.querySelector("#inventory-tools"),n=document.querySelector("#frame");f.updateHTMLInInventoryTools(),n.classList.add("no-transition"),n.style.backgroundColor="#00000000",n.classList.remove("no-transition"),n.style.backgroundColor="#00000079",t.show(),n.show()}openGeneratorGotMenu(){const e=document.querySelector("#generator-got");u=this.index,e.show(),document.querySelector("#frame-2").show(),e.querySelector(".inventory-generator")?.remove(),e.append(this.inventoryHTML)}getLevelCost(e=this.level-1){return I[this.type].levelCostFormula(e)}getLevelEffect(e=this.level-1){return I[this.type].levelEffectFormula(e)}}const I={basic:{income:1,sell:1,levelCostFormula:e=>10*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},uncommon:{income:2,sell:2,levelCostFormula:e=>25*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},rare:{income:3,sell:6,levelCostFormula:e=>50*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},epic:{income:4,sell:50,levelCostFormula:e=>125*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},legendary:{income:5,sell:5e3,levelCostFormula:e=>300*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},mythical:{income:7,sell:12500,levelCostFormula:e=>1e3*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},unique:{income:10,sell:3e4,levelCostFormula:e=>2750*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},fabled:{income:15,sell:75e3,levelCostFormula:e=>7250*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},divine:{income:30,sell:95e4,levelCostFormula:e=>20500*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},exotic:{income:25,sell:8e5,levelCostFormula:e=>85e3*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},arcane:{income:35,sell:3e6,levelCostFormula:e=>315e3*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},ethereal:{income:47,sell:75e5,levelCostFormula:e=>11e5*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},titanic:{income:65,sell:2e7,levelCostFormula:e=>4e6*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},phantom:{income:100,sell:3e8,levelCostFormula:e=>13e6*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},transcendent:{income:175,sell:2e9,levelCostFormula:e=>4e7*1.04**e,levelEffectFormula:e=>1.03**(e**.75)}},L={newbie:{chances:[["basic",65],["uncommon",25],["rare",9],["epic",1]],cost:10},intermediate:{chances:[["legendary",70],["mythical",25],["unique",4],["fabled",.9],["divine",.1]],cost:5e4},advanced:{chances:[["exotic",73],["arcane",21],["ethereal",5],["titanic",.89],["phantom",.1],["transcendent",.01]],cost:1e7}}}();