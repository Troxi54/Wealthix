!function(){const e={update(e,t){e.innerHTML!==t&&(e.innerHTML=t)},updateAll(){for(const t in e)if(!["update, updateAll"].includes(t)){const n=document.querySelector(("#"+t).replace(/[_]/g,"-"));n&&e.update(n,e[t]())}},cash_amount:()=>`${S.format(I.cash)}$`,main_frame_header:()=>r[o],selling:()=>a?S.format(I.generatorsInInventory[l].sellCost,2)+"$":"Sell",selling_2:()=>i?S.format(I.generatorsInInventory[u].sellCost,2)+"$":"Sell",placing_generator_info:()=>d?"Unequipping a generator":"Placing the generator",upgrading:()=>m?`${S.format(I.generatorsInInventory[l].getLevelCost())}$`:"Upgrade",close_main_frame_text:()=>y?"<":">",is_inventory_empty:()=>0===I.generatorsInInventory.length?"Your inventory is empty":"",bulk_sell_text:()=>v?"Cancel":"Bulk sell"},t="Wealthix";let n=Date.now(),o=0;const r=["Shop","Inventory"];let l=null,s=!1,a=!1,i=!1,c="",d=!1,u=null,m=!1,y=!1,p=Date.now(),v=!1,h=!1,g=1;const f={addEvent(e,t){e.addEventListener("click",t)},addAllEvents(){for(const e in f)if(!["addEvent"].includes(e)){const t=document.querySelector(("#"+e).replace(/[_]/g,"-"));t&&f.addEvent(t,f[e])}},inventory_tools_close:()=>{S.closeInventoryTools(),l=null},equip_generator:()=>{S.closeInventoryTools(),document.querySelector("#placing-generator").show(),s=!0,document.body.classList.add("placingGenerator")},cancel_placing_generator:()=>{d?S.cancelUnequippingGenerator():S.cancelPlacingGenerator()},sell_generator:()=>{a?(I.cash+=I.generatorsInInventory[l].sellCost,I.generatorsInInventory.splice(l,1),S.updateInventoryHTML(),S.closeInventoryTools()):a=!0,m=!1,document.querySelector("#upgrade-generator-bulk").hide()},generator_got_sell:()=>{i?(I.cash+=I.generatorsInInventory[u].sellCost,I.generatorsInInventory.splice(u,1),S.updateInventoryHTML(),S.closeGeneratorGotMenu()):i=!0},constructor_opened_close:()=>{S.closeConstructor()},constructor_opened_buy:()=>{S.buyConstructor(c)},generator_got_ok:()=>{S.closeGeneratorGotMenu(),S.updateInventoryHTML()},unequip_generator:()=>{document.querySelector("#unequip-generator").hide(),document.querySelector("#placing-generator").show(),d=!0,document.body.classList.add("unequippingGenerator")},upgrade_generator:()=>{if(m){const e=I.generatorsInInventory[l].getLevelCost();I.cash>=e&&(I.generatorsInInventory[l].level+=g,I.cash-=e,I.generatorsInInventory[l].updateEverything(),S.updateInventoryHTML(),S.updateHTMLInInventoryTools())}m=!0,a=!1,document.querySelector("#upgrade-generator-bulk").show()},close_main_frame:()=>{const e=document.querySelector("#main-frame"),t=document.querySelector("#main-frame-container");y?(t.className="",e.show()):(t.className="hidden",e.hide()),y=!y},bulk_sell:()=>{I.generatorsInInventory.length>0&&(v=!v)}};Element.prototype.hide=function(){this.style.display="none"},Element.prototype.show=function(){this.style.display=""},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};let I={cash:10,slots:9,generatorsOnField:[],generatorsInInventory:[],incomeRate:1,discoveredGenerators:{},openingConstructorSpeed:1};const S={format(e,t=0){const n=["","K","M","B","T","Qd","Qn","Sx","Sp"],o=function(e,t){return Math.floor(e*10**t)/10**t};if(0===e)return"0";if(e<1e3)return o(e,t)+"";if(e<1e9)return(o(e,0)+"").replace(/\B(?=(\d{3})+(?!\d))/g,",");if(e<1e3**n.length){const t=function(e,t){const o=Math.floor(Math.log10(e)/3);return Math.floor(e/1e3**o*10**t)/10**t+n[o]},o=Math.floor(Math.log10(e)/3),r=3,l=e-Math.floor(e/1e3**o*10**r)/10**r*1e3**o;return l?t(e,r)+" + "+t(l,0):t(e,r)}return e.toExponential(4).replace(/[+]/g,"")},updateInventoryHTML(){document.querySelectorAll("#inventory-generator-container > button").forEach((e=>{e.remove()})),I.generatorsInInventory.forEach(((e,t)=>{e.index=t,document.querySelector("#inventory-generator-container").append(e.inventoryHTML)}))},getUndefinedGenerator(e){let t=document.createElement("div");return t.classList.add("generator"),t.classList.add("undefined"),t.innerHTML="<p>+</p>",t.addEventListener("mousedown",(()=>{s&&(I.generatorsInInventory[l].addToField(e),S.cancelPlacingGenerator(),S.updateInventoryHTML())})),t},appendUndefinedGenerator(e,t){const n=document.querySelector("#field");t<document.querySelectorAll("#field > .generator").length?n.insertBefore(e,n.children[t]):n.append(e)},fillGeneratorArray(){const e=document.querySelector("#field");I.generatorsOnField.forEach(((t,n)=>{if(t instanceof L)e.append(t.fieldHTML);else{const t=this.getUndefinedGenerator(n);e.append(t)}}))},switchMainTab(e){document.querySelectorAll("#main-frame-content > div").forEach(((t,n)=>{e!==n&&t.hide()})),document.querySelectorAll("#main-frame-content > div")[e].show(),o=e},updateHTMLInInventoryTools(){const e=document.querySelector("#inventory-tools");e.querySelectorAll(".inventory-generator").forEach((e=>{e.remove()})),I.generatorsInInventory[l].updateEverything();const t=I.generatorsInInventory[l];e.append(t.inventoryHTML),document.querySelector("#inventory-tools-info").innerHTML=`<span class="rarity">Rarity:</span> ${t.type.capitalize()}<br><span class="cash">Income:</span> +${S.format(t.income,2)}$<br><span class="level">Level:</span> ${t.level}`},closeInventoryTools(){document.querySelector("#frame").hide(),document.querySelector("#inventory-tools").hide(),document.querySelector("#upgrade-generator-bulk").hide(),a=!1,m=!1},cancelPlacingGenerator(){s&&(s=!1,document.body.classList.remove("placingGenerator"),document.querySelector("#placing-generator").hide())},updateConstructorGenerators(){const e=document.querySelector("#constructor-opened-generators");e.innerHTML="",E[c].chances.forEach((t=>{const n=new L(t[0]).inventoryHTML;I.discoveredGenerators[t[0]]||(n.className="inventory-generator",t[1]>1?n.classList.add("undiscovered"):t[1]>.01?n.classList.add("super-undiscovered"):n.classList.add("mega-undiscovered"),n.children[0].innerHTML="",n.children[1].innerHTML="?"),n.children[2].innerHTML=t[1]+"%",e.append(n)}))},openConstructor(e){if(e){document.querySelector("#constructor-opened").show(),document.querySelector("#frame").show();const t=document.querySelector("#constructor-opened-div");t.className="div",t.classList.add(e),document.querySelector("#constructor-opened-info").innerHTML=`${e.capitalize()} constructor<br><span class="cash">${this.format(E[e].cost)}$</span>`,c=e,this.updateConstructorGenerators()}},closeConstructor(){document.querySelector("#frame").hide(),document.querySelector("#constructor-opened").hide()},buyConstructor(e){if(I.cash>=E[e].cost&&!h){I.cash-=E[e].cost,h=!0;const t=document.querySelector("#div-animation"),n=document.querySelector("#div-animation-frame");t.className="div no-transition",t.classList.add(c),t.style.transform="scale(2)",t.classList.remove("no-transition"),n.style.opacity="0",n.show(),n.style.transition="all "+500/I.openingConstructorSpeed+"ms",setTimeout((()=>{n.style.opacity="1",setTimeout((()=>{setTimeout((()=>{t.style.transition="all "+1e3/I.openingConstructorSpeed+"ms",t.style.transform="scale(4)",t.style.opacity="0",setTimeout((()=>{t.style="",n.style="",n.hide();let o=0;const r=100*Math.random();E[e].chances.every((e=>{if(o+=e[1],r<o){const t=new L(e[0]);return t.addToInventory(),t.openGeneratorGotMenu(),I.discoveredGenerators[e[0]]||(I.discoveredGenerators[e[0]]={gottenTimes:0,firstReceiptDate:Date.now()},this.updateConstructorGenerators()),!1}return!0}))}),1e3/I.openingConstructorSpeed)}),100/I.openingConstructorSpeed)}),500/I.openingConstructorSpeed)}),1e3/60)}},closeGeneratorGotMenu(){document.querySelector("#frame-2").hide(),document.querySelector("#generator-got").hide(),i=!1,h=!1},cancelUnequippingGenerator(){d&&(d=!1,document.body.classList.remove("unequippingGenerator"),document.querySelector("#placing-generator").hide(),S.isFieldEmpty()&&document.querySelector("#unequip-generator").show())},isFieldEmpty:()=>(is=!1,I.generatorsOnField.every((e=>!(e instanceof L)||(is=!0,!1))),is)};window.onload=()=>{I.generatorsOnField=[...Array(I.slots)],document.querySelector("#upgrade-generator-input").addEventListener("input",(function(){this.value.length>3&&(this.value=this.value.slice(0,3)),""!==this.value&&+this.value<1&&(this.value=1),this.value=this.value.replace(/[.]/g,""),this.value&&(g=+this.value)})),document.querySelector("#upgrade-generator-input").addEventListener("focusout",(function(){this.value||(this.value="1"),g=+this.value})),document.querySelectorAll("#main-frame-tabs > button").forEach(((e,t)=>{e.addEventListener("click",(()=>{S.switchMainTab(t)}))})),document.querySelectorAll("#shop-content > div > div > button").forEach(((e,t)=>{e.addEventListener("click",(()=>{S.openConstructor(e.id)}))})),window.addEventListener("click",(function(e){["upgrade-generator","upgrade-generator-input"].includes(e.target.id)||(m=!1,document.querySelector("#upgrade-generator-bulk").hide()),["sell-generator"].includes(e.target.id)||(a=!1)})),f.addAllEvents(),S.switchMainTab(0),function(){const e=localStorage.getItem(t);if(e){const t=JSON.parse(window.atob(e));if(t)for(const e in t)["generatorsOnField","generatorsInInventory"].includes(e)&&t[e].forEach(((n,o)=>{n&&"object"==typeof n&&n.level&&n.type&&(t[e][o]=new L(n.type,{level:n.level,index:n.index}))})),I[e]=t[e]}}(),S.fillGeneratorArray(),S.updateInventoryHTML(),I.generatorsOnField.forEach(((e,t)=>{e&&e instanceof L&&(e.index=t)})),setInterval((()=>{if(!document.hidden){I.incomeRate=1,I.openingConstructorSpeed=1;const t=document.querySelector("#field"),n=100/Math.ceil(I.slots**.5);document.documentElement.style.setProperty("--generator-size",n+"%"),document.documentElement.style.setProperty("--generator-size-px",t.clientWidth*n/100+"px"),document.documentElement.style.setProperty("--generator-dimension",Math.ceil(I.slots**.5)),t.querySelectorAll("div").forEach((e=>{const t=e.querySelector("p"),n=t.style.getPropertyValue("--decreasedSize");if(t.clientWidth>e.clientWidth){const n=t.clientWidth/e.clientWidth*1.05;t.style.fontSize=getComputedStyle(t).fontSize.slice(0,-2)/n+"px",t.style.setProperty("--decreasedSize",n)}else n&&t.clientWidth*n<=e.clientWidth&&(t.style="")}));const o=document.querySelector("#unequip-generator");S.isFieldEmpty()?d||o.show():(o.hide(),d&&S.cancelUnequippingGenerator());const r=e=>{e instanceof L&&e.updateEverything()};if(I.generatorsOnField.forEach(r),I.generatorsInInventory.forEach(r),document.documentElement.style.setProperty("--generator-speed-work",1/I.incomeRate+"s"),Date.now()>=p+1/I.incomeRate*1e3){document.querySelectorAll(".generator p").forEach((e=>{e.classList.add("no-transition"),e.style.top="50%",e.style.opacity="1",setTimeout((()=>{e.classList.remove("no-transition"),e.style.top="25%",e.style.opacity="0"}),1e3/60)}));let e=0;I.generatorsOnField.forEach((t=>{let n=Math.floor((Date.now()-p)/(1e3*I.incomeRate));t instanceof L&&(e+=t.income*n)})),I.cash+=e,p=Date.now()}e.updateAll()}Date.now()>=n+1e3&&(!function(){const e=window.btoa(JSON.stringify(I));localStorage.setItem(t,e),console.log("Game saved!")}(),n=Date.now())}),1e3/60)};class L{constructor(e,t){this.type=e,this.level=1,t&&"object"==typeof t&&("number"==typeof t?.level&&(this.level=t.level),"number"==typeof t?.index&&(this.index=t.index)),this.updateEverything()}getIncome(){return q[this.type].income*this.getLevelEffect()}getSellCost(){return q[this.type].sell*(q[this.type].levelCostFormula(this.level-1)/q[this.type].levelCostFormula(0))}addToField(e){if(e<I.generatorsOnField.length){const t=document.querySelectorAll("#field > .generator");I.generatorsInInventory.splice(l,1),t[e]&&I.generatorsOnField[e]instanceof L&&I.generatorsOnField[e].addToInventory(),t?.[e]?.remove(),I.generatorsOnField[e]=this;const n=document.querySelector("#field");e<t.length-1?n.insertBefore(this.fieldHTML,n.children[e]):e===t.length-1&&n.append(this.fieldHTML),this.index=e}}addToInventory(){I.generatorsInInventory.push(this),I.generatorsInInventory.sort(((e,t)=>t.income-e.income)),S.updateInventoryHTML()}getFieldHTML(){let e=document.createElement("div");return e.classList.add("generator"),e.classList.add(this.type),e.innerHTML=`<p>+${S.format(this.income,2)}$</p>`,e.addEventListener("mousedown",(()=>{if(s)I.generatorsInInventory[l].addToField(this.index),S.cancelPlacingGenerator(),S.updateInventoryHTML();else if(d){const e=I.generatorsOnField.indexOf(this);I.generatorsOnField[e].addToInventory(),I.generatorsOnField[e]=void 0,document.querySelector("#field").children[e].remove(),S.appendUndefinedGenerator(S.getUndefinedGenerator(e),e)}})),e}getInventoryHTML(){let e=document.createElement("button");return e.classList.add("inventory-generator"),e.classList.add(this.type),e.innerHTML=`<p>${this.type.capitalize()}</p><p>+${S.format(this.income,2)}$</p><p>${this.level}</p>`,e.addEventListener("click",(()=>{v?(I.cash+=this.sellCost,I.generatorsInInventory.splice(this.index,1),S.updateInventoryHTML(),0===I.generatorsInInventory.length&&(v=!1)):this.openInInventoryTools(this.index)})),e}updateEverything(){this.income=this.getIncome(),this.sellCost=this.getSellCost(),this.fieldHTML=this.getFieldHTML(),this.inventoryHTML=this.getInventoryHTML()}openInInventoryTools(e){l=e,S.cancelPlacingGenerator();const t=document.querySelector("#inventory-tools"),n=document.querySelector("#frame");S.updateHTMLInInventoryTools(),n.classList.add("no-transition"),n.style.backgroundColor="#00000000",n.classList.remove("no-transition"),n.style.backgroundColor="#00000079",t.show(),n.show()}openGeneratorGotMenu(){const e=document.querySelector("#generator-got");u=this.index,e.show(),document.querySelector("#frame-2").show(),e.querySelector(".inventory-generator")?.remove(),e.append(this.inventoryHTML)}getLevelCost(e=this.level-2+g){const t=q[this.type].levelCostFormula(e),n=q[this.type].levelCostFormula(1)/q[this.type].levelCostFormula(0),o=(t*n-q[this.type].levelCostFormula(this.level-1))/(n-1);return Math.ceil(o)}getLevelEffect(e=this.level-1){return q[this.type].levelEffectFormula(e)}}const q={basic:{income:1,sell:1,levelCostFormula:e=>10*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},uncommon:{income:2,sell:2,levelCostFormula:e=>25*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},rare:{income:3,sell:6,levelCostFormula:e=>50*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},epic:{income:4,sell:50,levelCostFormula:e=>125*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},legendary:{income:5,sell:5e3,levelCostFormula:e=>300*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},mythical:{income:7,sell:12500,levelCostFormula:e=>1e3*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},unique:{income:10,sell:3e4,levelCostFormula:e=>2750*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},fabled:{income:15,sell:75e3,levelCostFormula:e=>7250*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},divine:{income:30,sell:95e4,levelCostFormula:e=>20500*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},exotic:{income:25,sell:8e5,levelCostFormula:e=>85e3*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},arcane:{income:35,sell:3e6,levelCostFormula:e=>315e3*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},ethereal:{income:47,sell:75e5,levelCostFormula:e=>11e5*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},titanic:{income:65,sell:2e7,levelCostFormula:e=>4e6*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},phantom:{income:100,sell:3e8,levelCostFormula:e=>13e6*1.04**e,levelEffectFormula:e=>1.03**(e**.75)},transcendent:{income:175,sell:2e9,levelCostFormula:e=>4e7*1.04**e,levelEffectFormula:e=>1.03**(e**.75)}},E={newbie:{chances:[["basic",65],["uncommon",25],["rare",9],["epic",1]],cost:10},intermediate:{chances:[["legendary",70],["mythical",25],["unique",4],["fabled",.9],["divine",.1]],cost:5e4},advanced:{chances:[["exotic",73],["arcane",21],["ethereal",5],["titanic",.89],["phantom",.1],["transcendent",.01]],cost:1e7}}}();